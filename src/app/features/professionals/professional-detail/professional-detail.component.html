<div *ngIf="professional$ | async as professional; else loadingOrError"
     class="container mx-auto p-4 md:p-8"
>
  <a routerLink="/" class="inline-flex items-center text-sky-600 hover:text-sky-800 mb-6 group">
    <span class="mr-2 text-2xl transition-tranform duration-300 group-hover:-translate-x-1">&larr;</span>
    Voltar para a lista
  </a>

  <!-- details -->
  <div class="bg-white rounded-lg shadow-lg p-8">
    <h2 class="text-4xl font-bold text-slate-800">{{ professional.name }}</h2>
    <p class="text-lg text-slate-500 mt-2">{{ professional.email }}</p>
  </div>

  <!-- divisor -->
  <div class="border-t border-slate-200 my-6"></div>

  <!-- agenda -->
  <div>
    <h3 class="text-2xl font-semibold text-slate-700">Agenda</h3>
    <div class="mt-4">
      <label for="data-selector" class="block text-sm font-medium text-slate-600">Selecione a data</label>
      <input
        type="date"
        id="data-selector"
        [value]="selectedDate"
        (change)="onDateChange($event)"
        class="mt-1 block w-full md:w-1/3 p-2 border border-slate-300 rounded-md shadow-sm focus:ring-sky-500
          focus:border-sky-500 sm:text-sm">
    </div>

    <div class="mt-6">
      <ng-container *ngIf="availability$ | async as availability; else loadingAvailability">
        <div *ngIf="availability.available_times.length > 0; else noSlots">
          <h4 class="text-lg font-medium text-slate-600 mb-3">Horários disponíveis:</h4>
          <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2">
            <button *ngFor="let time of availability.available_times"
                    class="p-2 border border-sky-500 text-sky-600 font-semibold rounded-md hover:bg-sky-500
                      hover:text-white transition-colors duration-200">
              {{ time }}
            </button>
          </div>
        </div>
        <ng-template #noSlots>
          <p>Não há horários disponíveis para esta data.</p>
        </ng-template>
      </ng-container>
      <ng-template #loadingAvailability>
        <p>Verificando horários...</p>
      </ng-template>
    </div>
  </div>
</div>

<ng-template #loadingOrError>
  <p class="text-center p-8 text-slate-500">
    Carregando detalhes do profissional...
  </p>
</ng-template>
